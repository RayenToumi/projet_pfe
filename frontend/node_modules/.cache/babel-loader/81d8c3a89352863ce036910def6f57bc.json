{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\Toumi\\\\Desktop\\\\projet pfe\\\\prpfe\\\\src\\\\components\\\\departement\\\\CardDepartment.js\",\n  _s = $RefreshSig$();\nimport React, { useState, useEffect } from \"react\";\nimport PropTypes from \"prop-types\";\nimport { Search, Edit, Trash, Plus, X, Check, Filter } from \"lucide-react\";\n\n// ... (les styles encapsulés restent identiques)\nimport { jsxDEV as _jsxDEV, Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nexport default function CardDepartment({\n  color = \"light\"\n}) {\n  _s();\n  const [searchTerm, setSearchTerm] = useState(\"\");\n  const [sortOption, setSortOption] = useState(\"\");\n  const [departments, setDepartments] = useState([{\n    _id: \"1\",\n    nom: \"Ressources Humaines\"\n  }, {\n    _id: \"2\",\n    nom: \"Informatique\"\n  }, {\n    _id: \"3\",\n    nom: \"Marketing\"\n  }]);\n  const [modalOuvert, setModalOuvert] = useState(false);\n  const [isEditModalOpen, setIsEditModalOpen] = useState(false);\n  const [selectedDepartmentId, setSelectedDepartmentId] = useState(null);\n  const [selectedDepartmentName, setSelectedDepartmentName] = useState(\"\");\n  const [newDepartment, setNewDepartment] = useState({\n    nom: \"\"\n  });\n  const [selectedDepartment, setSelectedDepartment] = useState(null);\n  const [errors, setErrors] = useState({});\n  const [toast, setToast] = useState({\n    affiche: false,\n    message: \"\",\n    type: \"\"\n  });\n\n  // Filtrage et tri local\n  const filteredDepartments = departments.filter(department => {\n    return department.nom.toLowerCase().includes(searchTerm.toLowerCase()) || department._id.includes(searchTerm);\n  }).sort((a, b) => {\n    if (!sortOption) return 0;\n    if (sortOption === \"id-asc\") return a._id.localeCompare(b._id);\n    if (sortOption === \"id-desc\") return b._id.localeCompare(a._id);\n    return a.nom.localeCompare(b.nom);\n  });\n\n  // Gestion des actions\n  const handleAction = (action, id, nom) => {\n    const department = departments.find(d => d._id === id);\n    switch (action) {\n      case \"modifier\":\n        setSelectedDepartment({\n          ...department\n        });\n        setIsEditModalOpen(true);\n        break;\n      case \"supprimer\":\n        setSelectedDepartmentId(id);\n        setSelectedDepartmentName(nom);\n        setModalOuvert(true);\n        break;\n      default:\n        break;\n    }\n  };\n\n  // Suppression locale\n  const handleConfirmDelete = () => {\n    setDepartments(departments.filter(d => d._id !== selectedDepartmentId));\n    setModalOuvert(false);\n    afficherToast(\"Département supprimé avec succès\", \"success\");\n  };\n\n  // Ajout local\n  const handleModalSubmit = () => {\n    if (!validateForm(newDepartment)) return;\n    const newId = Date.now().toString();\n    setDepartments([...departments, {\n      ...newDepartment,\n      _id: newId\n    }]);\n    setModalOuvert(false);\n    setNewDepartment({\n      nom: \"\"\n    });\n    afficherToast(\"Département ajouté avec succès\", \"success\");\n  };\n\n  // Modification locale\n  const handleEditSubmit = () => {\n    if (!validateForm(selectedDepartment)) return;\n    setDepartments(departments.map(d => d._id === selectedDepartment._id ? selectedDepartment : d));\n    setIsEditModalOpen(false);\n    afficherToast(\"Département modifié avec succès\", \"success\");\n  };\n\n  // Validation (identique)\n  const validateForm = department => {\n    const newErrors = {};\n    if (!department.nom) newErrors.nom = \"Le nom est obligatoire\";\n    setErrors(newErrors);\n    return Object.keys(newErrors).length === 0;\n  };\n\n  // ... (le reste du code JSX reste inchangé)\n\n  return /*#__PURE__*/_jsxDEV(_Fragment, {\n    children: /*#__PURE__*/_jsxDEV(\"style\", {\n      children: encapsulatedStyles\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 95,\n      columnNumber: 7\n    }, this)\n  }, void 0, false);\n}\n_s(CardDepartment, \"mhptua7owPZS2aRGFi8h239JbOg=\");\n_c = CardDepartment;\nCardDepartment.propTypes = {\n  color: PropTypes.string\n};\nvar _c;\n$RefreshReg$(_c, \"CardDepartment\");","map":{"version":3,"names":["React","useState","useEffect","PropTypes","Search","Edit","Trash","Plus","X","Check","Filter","jsxDEV","_jsxDEV","Fragment","_Fragment","CardDepartment","color","_s","searchTerm","setSearchTerm","sortOption","setSortOption","departments","setDepartments","_id","nom","modalOuvert","setModalOuvert","isEditModalOpen","setIsEditModalOpen","selectedDepartmentId","setSelectedDepartmentId","selectedDepartmentName","setSelectedDepartmentName","newDepartment","setNewDepartment","selectedDepartment","setSelectedDepartment","errors","setErrors","toast","setToast","affiche","message","type","filteredDepartments","filter","department","toLowerCase","includes","sort","a","b","localeCompare","handleAction","action","id","find","d","handleConfirmDelete","afficherToast","handleModalSubmit","validateForm","newId","Date","now","toString","handleEditSubmit","map","newErrors","Object","keys","length","children","encapsulatedStyles","fileName","_jsxFileName","lineNumber","columnNumber","_c","propTypes","string","$RefreshReg$"],"sources":["C:/Users/Toumi/Desktop/projet pfe/prpfe/src/components/departement/CardDepartment.js"],"sourcesContent":["import React, { useState, useEffect } from \"react\";\r\nimport PropTypes from \"prop-types\";\r\nimport { Search, Edit, Trash, Plus, X, Check, Filter } from \"lucide-react\";\r\n\r\n// ... (les styles encapsulés restent identiques)\r\n\r\nexport default function CardDepartment({ color = \"light\" }) {\r\n  const [searchTerm, setSearchTerm] = useState(\"\");\r\n  const [sortOption, setSortOption] = useState(\"\");\r\n  const [departments, setDepartments] = useState([\r\n    { _id: \"1\", nom: \"Ressources Humaines\" },\r\n    { _id: \"2\", nom: \"Informatique\" },\r\n    { _id: \"3\", nom: \"Marketing\" }\r\n  ]);\r\n  const [modalOuvert, setModalOuvert] = useState(false);\r\n  const [isEditModalOpen, setIsEditModalOpen] = useState(false);\r\n  const [selectedDepartmentId, setSelectedDepartmentId] = useState(null);\r\n  const [selectedDepartmentName, setSelectedDepartmentName] = useState(\"\");\r\n  const [newDepartment, setNewDepartment] = useState({ nom: \"\" });\r\n  const [selectedDepartment, setSelectedDepartment] = useState(null);\r\n  const [errors, setErrors] = useState({});\r\n  const [toast, setToast] = useState({ affiche: false, message: \"\", type: \"\" });\r\n\r\n  // Filtrage et tri local\r\n  const filteredDepartments = departments\r\n    .filter((department) => {\r\n      return department.nom.toLowerCase().includes(searchTerm.toLowerCase()) ||\r\n        department._id.includes(searchTerm);\r\n    })\r\n    .sort((a, b) => {\r\n      if (!sortOption) return 0;\r\n      if (sortOption === \"id-asc\") return a._id.localeCompare(b._id);\r\n      if (sortOption === \"id-desc\") return b._id.localeCompare(a._id);\r\n      return a.nom.localeCompare(b.nom);\r\n    });\r\n\r\n  // Gestion des actions\r\n  const handleAction = (action, id, nom) => {\r\n    const department = departments.find(d => d._id === id);\r\n    switch (action) {\r\n      case \"modifier\":\r\n        setSelectedDepartment({...department});\r\n        setIsEditModalOpen(true);\r\n        break;\r\n      case \"supprimer\":\r\n        setSelectedDepartmentId(id);\r\n        setSelectedDepartmentName(nom);\r\n        setModalOuvert(true);\r\n        break;\r\n      default: break;\r\n    }\r\n  };\r\n\r\n  // Suppression locale\r\n  const handleConfirmDelete = () => {\r\n    setDepartments(departments.filter(d => d._id !== selectedDepartmentId));\r\n    setModalOuvert(false);\r\n    afficherToast(\"Département supprimé avec succès\", \"success\");\r\n  };\r\n\r\n  // Ajout local\r\n  const handleModalSubmit = () => {\r\n    if (!validateForm(newDepartment)) return;\r\n\r\n    const newId = Date.now().toString();\r\n    setDepartments([...departments, { ...newDepartment, _id: newId }]);\r\n    setModalOuvert(false);\r\n    setNewDepartment({ nom: \"\" });\r\n    afficherToast(\"Département ajouté avec succès\", \"success\");\r\n  };\r\n\r\n  // Modification locale\r\n  const handleEditSubmit = () => {\r\n    if (!validateForm(selectedDepartment)) return;\r\n\r\n    setDepartments(departments.map(d => \r\n      d._id === selectedDepartment._id ? selectedDepartment : d\r\n    ));\r\n    setIsEditModalOpen(false);\r\n    afficherToast(\"Département modifié avec succès\", \"success\");\r\n  };\r\n\r\n  // Validation (identique)\r\n  const validateForm = (department) => {\r\n    const newErrors = {};\r\n    if (!department.nom) newErrors.nom = \"Le nom est obligatoire\";\r\n    setErrors(newErrors);\r\n    return Object.keys(newErrors).length === 0;\r\n  };\r\n\r\n  // ... (le reste du code JSX reste inchangé)\r\n\r\n  return (\r\n    <>\r\n      <style>{encapsulatedStyles}</style>\r\n      {/* Le JSX reste identique car la structure UI ne change pas */}\r\n    </>\r\n  );\r\n}\r\n\r\nCardDepartment.propTypes = {\r\n  color: PropTypes.string,\r\n};"],"mappings":";;AAAA,OAAOA,KAAK,IAAIC,QAAQ,EAAEC,SAAS,QAAQ,OAAO;AAClD,OAAOC,SAAS,MAAM,YAAY;AAClC,SAASC,MAAM,EAAEC,IAAI,EAAEC,KAAK,EAAEC,IAAI,EAAEC,CAAC,EAAEC,KAAK,EAAEC,MAAM,QAAQ,cAAc;;AAE1E;AAAA,SAAAC,MAAA,IAAAC,OAAA,EAAAC,QAAA,IAAAC,SAAA;AAEA,eAAe,SAASC,cAAcA,CAAC;EAAEC,KAAK,GAAG;AAAQ,CAAC,EAAE;EAAAC,EAAA;EAC1D,MAAM,CAACC,UAAU,EAAEC,aAAa,CAAC,GAAGlB,QAAQ,CAAC,EAAE,CAAC;EAChD,MAAM,CAACmB,UAAU,EAAEC,aAAa,CAAC,GAAGpB,QAAQ,CAAC,EAAE,CAAC;EAChD,MAAM,CAACqB,WAAW,EAAEC,cAAc,CAAC,GAAGtB,QAAQ,CAAC,CAC7C;IAAEuB,GAAG,EAAE,GAAG;IAAEC,GAAG,EAAE;EAAsB,CAAC,EACxC;IAAED,GAAG,EAAE,GAAG;IAAEC,GAAG,EAAE;EAAe,CAAC,EACjC;IAAED,GAAG,EAAE,GAAG;IAAEC,GAAG,EAAE;EAAY,CAAC,CAC/B,CAAC;EACF,MAAM,CAACC,WAAW,EAAEC,cAAc,CAAC,GAAG1B,QAAQ,CAAC,KAAK,CAAC;EACrD,MAAM,CAAC2B,eAAe,EAAEC,kBAAkB,CAAC,GAAG5B,QAAQ,CAAC,KAAK,CAAC;EAC7D,MAAM,CAAC6B,oBAAoB,EAAEC,uBAAuB,CAAC,GAAG9B,QAAQ,CAAC,IAAI,CAAC;EACtE,MAAM,CAAC+B,sBAAsB,EAAEC,yBAAyB,CAAC,GAAGhC,QAAQ,CAAC,EAAE,CAAC;EACxE,MAAM,CAACiC,aAAa,EAAEC,gBAAgB,CAAC,GAAGlC,QAAQ,CAAC;IAAEwB,GAAG,EAAE;EAAG,CAAC,CAAC;EAC/D,MAAM,CAACW,kBAAkB,EAAEC,qBAAqB,CAAC,GAAGpC,QAAQ,CAAC,IAAI,CAAC;EAClE,MAAM,CAACqC,MAAM,EAAEC,SAAS,CAAC,GAAGtC,QAAQ,CAAC,CAAC,CAAC,CAAC;EACxC,MAAM,CAACuC,KAAK,EAAEC,QAAQ,CAAC,GAAGxC,QAAQ,CAAC;IAAEyC,OAAO,EAAE,KAAK;IAAEC,OAAO,EAAE,EAAE;IAAEC,IAAI,EAAE;EAAG,CAAC,CAAC;;EAE7E;EACA,MAAMC,mBAAmB,GAAGvB,WAAW,CACpCwB,MAAM,CAAEC,UAAU,IAAK;IACtB,OAAOA,UAAU,CAACtB,GAAG,CAACuB,WAAW,CAAC,CAAC,CAACC,QAAQ,CAAC/B,UAAU,CAAC8B,WAAW,CAAC,CAAC,CAAC,IACpED,UAAU,CAACvB,GAAG,CAACyB,QAAQ,CAAC/B,UAAU,CAAC;EACvC,CAAC,CAAC,CACDgC,IAAI,CAAC,CAACC,CAAC,EAAEC,CAAC,KAAK;IACd,IAAI,CAAChC,UAAU,EAAE,OAAO,CAAC;IACzB,IAAIA,UAAU,KAAK,QAAQ,EAAE,OAAO+B,CAAC,CAAC3B,GAAG,CAAC6B,aAAa,CAACD,CAAC,CAAC5B,GAAG,CAAC;IAC9D,IAAIJ,UAAU,KAAK,SAAS,EAAE,OAAOgC,CAAC,CAAC5B,GAAG,CAAC6B,aAAa,CAACF,CAAC,CAAC3B,GAAG,CAAC;IAC/D,OAAO2B,CAAC,CAAC1B,GAAG,CAAC4B,aAAa,CAACD,CAAC,CAAC3B,GAAG,CAAC;EACnC,CAAC,CAAC;;EAEJ;EACA,MAAM6B,YAAY,GAAGA,CAACC,MAAM,EAAEC,EAAE,EAAE/B,GAAG,KAAK;IACxC,MAAMsB,UAAU,GAAGzB,WAAW,CAACmC,IAAI,CAACC,CAAC,IAAIA,CAAC,CAAClC,GAAG,KAAKgC,EAAE,CAAC;IACtD,QAAQD,MAAM;MACZ,KAAK,UAAU;QACblB,qBAAqB,CAAC;UAAC,GAAGU;QAAU,CAAC,CAAC;QACtClB,kBAAkB,CAAC,IAAI,CAAC;QACxB;MACF,KAAK,WAAW;QACdE,uBAAuB,CAACyB,EAAE,CAAC;QAC3BvB,yBAAyB,CAACR,GAAG,CAAC;QAC9BE,cAAc,CAAC,IAAI,CAAC;QACpB;MACF;QAAS;IACX;EACF,CAAC;;EAED;EACA,MAAMgC,mBAAmB,GAAGA,CAAA,KAAM;IAChCpC,cAAc,CAACD,WAAW,CAACwB,MAAM,CAACY,CAAC,IAAIA,CAAC,CAAClC,GAAG,KAAKM,oBAAoB,CAAC,CAAC;IACvEH,cAAc,CAAC,KAAK,CAAC;IACrBiC,aAAa,CAAC,kCAAkC,EAAE,SAAS,CAAC;EAC9D,CAAC;;EAED;EACA,MAAMC,iBAAiB,GAAGA,CAAA,KAAM;IAC9B,IAAI,CAACC,YAAY,CAAC5B,aAAa,CAAC,EAAE;IAElC,MAAM6B,KAAK,GAAGC,IAAI,CAACC,GAAG,CAAC,CAAC,CAACC,QAAQ,CAAC,CAAC;IACnC3C,cAAc,CAAC,CAAC,GAAGD,WAAW,EAAE;MAAE,GAAGY,aAAa;MAAEV,GAAG,EAAEuC;IAAM,CAAC,CAAC,CAAC;IAClEpC,cAAc,CAAC,KAAK,CAAC;IACrBQ,gBAAgB,CAAC;MAAEV,GAAG,EAAE;IAAG,CAAC,CAAC;IAC7BmC,aAAa,CAAC,gCAAgC,EAAE,SAAS,CAAC;EAC5D,CAAC;;EAED;EACA,MAAMO,gBAAgB,GAAGA,CAAA,KAAM;IAC7B,IAAI,CAACL,YAAY,CAAC1B,kBAAkB,CAAC,EAAE;IAEvCb,cAAc,CAACD,WAAW,CAAC8C,GAAG,CAACV,CAAC,IAC9BA,CAAC,CAAClC,GAAG,KAAKY,kBAAkB,CAACZ,GAAG,GAAGY,kBAAkB,GAAGsB,CAC1D,CAAC,CAAC;IACF7B,kBAAkB,CAAC,KAAK,CAAC;IACzB+B,aAAa,CAAC,iCAAiC,EAAE,SAAS,CAAC;EAC7D,CAAC;;EAED;EACA,MAAME,YAAY,GAAIf,UAAU,IAAK;IACnC,MAAMsB,SAAS,GAAG,CAAC,CAAC;IACpB,IAAI,CAACtB,UAAU,CAACtB,GAAG,EAAE4C,SAAS,CAAC5C,GAAG,GAAG,wBAAwB;IAC7Dc,SAAS,CAAC8B,SAAS,CAAC;IACpB,OAAOC,MAAM,CAACC,IAAI,CAACF,SAAS,CAAC,CAACG,MAAM,KAAK,CAAC;EAC5C,CAAC;;EAED;;EAEA,oBACE5D,OAAA,CAAAE,SAAA;IAAA2D,QAAA,eACE7D,OAAA;MAAA6D,QAAA,EAAQC;IAAkB;MAAAC,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OAAQ;EAAC,gBAEnC,CAAC;AAEP;AAAC7D,EAAA,CA5FuBF,cAAc;AAAAgE,EAAA,GAAdhE,cAAc;AA8FtCA,cAAc,CAACiE,SAAS,GAAG;EACzBhE,KAAK,EAAEb,SAAS,CAAC8E;AACnB,CAAC;AAAC,IAAAF,EAAA;AAAAG,YAAA,CAAAH,EAAA","ignoreList":[]},"metadata":{},"sourceType":"module"}